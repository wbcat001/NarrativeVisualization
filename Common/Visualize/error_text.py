sample1 = """plaintext\nTAG: LOCATION, Content: EXT. ALICE\'S HOUSE - DAY\nTAG: STATEMENT, Content: Alice swallows one of the cakes and begins to shrink. She quickly runs out of the house, finding a crowd of small animals and birds waiting outside.\n\nTAG: LOCATION, Content: EXT. WOODLAND - DAY\nTAG: STATEMENT, Content: Alice escapes into a thick wood, her mind racing with thoughts of how to return to her proper size and find the lovely garden.\n\nTAG: DIALOGUE, Name: ALICE, Content: "The first thing I've got to do is to grow to my right size again; and the second thing is to find my way into that lovely garden. I think that will be the best plan."\nTAG: STATEMENT, Content: She wanders through the trees, anxious and unsure, when a sharp bark startles her.\n\nTAG: STATEMENT, Content: An enormous puppy looks down at her, stretching out a paw to touch her. \n\nTAG: DIALOGUE, Name: ALICE, Content: "Poor little thing!"\nTAG: STATEMENT, Content: Alice, frightened the puppy might be hungry, picks up a stick and holds it out.\n\nTAG: STATEMENT, Content: The puppy jumps with delight, rushing at the stick. Alice dodges behind a thistle, avoiding being trampled.\n\nTAG: STATEMENT, Content: The puppy continues to chase the stick, tumbling over itself in excitement, until it finally sits down, panting.\n\nTAG: STATEMENT, Content: Seizing the opportunity, Alice escapes, running until she is out of breath, the puppy\'s barking fading in the distance.\n\nTAG: DIALOGUE, Name: ALICE, Content: "And yet what a dear little puppy it was! I should have liked teaching it tricks very much, if—if I'd only been the right size to do it!"\nTAG: STATEMENT, Content: Alice leans against a buttercup, pondering how to grow back to her original size.\n\nTAG: STATEMENT, Content: She looks around, searching for something to eat or drink but finds nothing suitable. \n\nTAG: STATEMENT, Content: Spotting a large mushroom, she stretches on tiptoe to peek over the edge and encounters a large blue caterpillar smoking a hookah.\n\nTAG: LOCATION, Content: EXT. MUSHROOM - DAY\nTAG: STATEMENT, Content: The Caterpillar and Alice regard each other in silence before the Caterpillar addresses her.\n\nTAG: DIALOGUE, Name: CATERPILLAR, Content: "Who are _you?_"\nTAG: DIALOGUE, Name: ALICE, Content: "I—I hardly know, sir, just at present—at least I know who I _was_ when I got up this morning, but I think I must have been changed several times since then."\n\nTAG: DIALOGUE, Name: CATERPILLAR, Content: "What do you mean by that? Explain yourself!"\nTAG: DIALOGUE, Name: ALICE, Content: "I can't explain _myself_, I'm afraid, sir, because I'm not myself, you see."\n\nTAG: DIALOGUE, Name: CATERPILLAR, Content: "I don't see."\nTAG: DIALOGUE, Name: ALICE, Content: "I'm afraid I can't put it more clearly..."\n\nTAG: DIALOGUE, Name: CATERPILLAR, Content: "It isn't."\nTAG: DIALOGUE, Name: ALICE, Content: "Well, perhaps you haven't found it so yet..."\n\nTAG: DIALOGUE, Name: CATERPILLAR, Content: "You!" \nTAG: DIALOGUE, Name: CATERPILLAR, Content: "Who are _you?_"\n\nTAG: DIALOGUE, Name: ALICE, Content: "I think, you ought to tell me who _you_ are, first."\nTAG: DIALOGUE, Name: CATERPILLAR, Content: "Why?"\n\nTAG: STATEMENT, Content: Alice, unable to think of an answer, turns away. The Caterpillar calls her back.\n\nTAG: DIALOGUE, Name: CATERPILLAR, Content: "Come back! I've something important to say!"\nTAG: STATEMENT, Content: Intrigued, Alice turns and returns.\n\nTAG: DIALOGUE, Name: CATERPILLAR, Content: "Keep your temper."\nTAG: DIALOGUE, Name: ALICE, Content: "Is that all?"\nTAG: DIALOGUE, Name: CATERPILLAR, Content: "No."\n"""

sample2 = """
\nTAG: LOCATION, CONTENT: INT. TEA PARTY - DAY\n\nTAG: STATEMENT, CONTENT: Alice sits at a table laid for more than three, surrounded by the Hatter, the March Hare, and the Dormouse.\n\nTAG: DIALOGUE, NAME: ALICE, CONTENT: "I didn't know it was _your_ table; it's laid for a great many more than three."\n\nTAG: DIALOGUE, NAME: HATTER, CONTENT: "Your hair wants cutting."\n\nTAG: STATEMENT, CONTENT: The Hatter looks at Alice with great curiosity, marking his first speech.\n\nTAG: DIALOGUE, NAME: ALICE, CONTENT: "You should learn not to make personal remarks; it's very rude."\n\nTAG: STATEMENT, CONTENT: The Hatter opens his eyes wide, surprised by her response.\n\nTAG: DIALOGUE, NAME: HATTER, CONTENT: "Why is a raven like a writing-desk?"\n\nTAG: STATEMENT, CONTENT: Alice's interest piques as she thinks about the riddle.\n\nTAG: DIALOGUE, NAME: ALICE, CONTENT: "Come, we shall have some fun now! I believe I can guess that."\n\nTAG: DIALOGUE, NAME: MARCH HARE, CONTENT: "Do you mean that you think you can find out the answer to it?"\n\nTAG: DIALOGUE, NAME: ALICE, CONTENT: "Exactly so."\n\nTAG: DIALOGUE, NAME: MARCH HARE, CONTENT: "Then you should say what you mean."\n\nTAG: DIALOGUE, NAME: ALICE, CONTENT: "I do; at least—at least I mean what I say—that's the same thing, you know."\n\nTAG: DIALOGUE, NAME: HATTER, CONTENT: "Not the same thing a bit! 
You might just as well say that 'I see what I eat' is the same thing as 'I eat what I see'!"\n\nTAG: DIALOGUE, NAME: MARCH HARE, CONTENT: "You might just as well say that 'I like what I get' is the same thing as 'I get what I like'!"\n\nTAG: DIALOGUE, NAME: DORMOUSE, CONTENT: "You might just as well say that 'I breathe when I sleep' is the same thing as 'I sleep when I breathe'!"\n\nTAG: STATEMENT, CONTENT: Silence falls over the group as Alice contemplates ravens and writing-desks.\n\nTAG: DIALOGUE, NAME: 
HATTER, CONTENT: "What day of the month is it?"\n\nTAG: STATEMENT, CONTENT: The Hatter pulls out his watch, examining it uneasily.\n\nTAG: DIALOGUE, NAME: ALICE, CONTENT: "The fourth."\n\nTAG: DIALOGUE, NAME: HATTER, CONTENT: "Two days wrong! I told you butter wouldn't suit the works!"\n\nTAG: STATEMENT, CONTENT: The Hatter glares at the March Hare.\n\nTAG: DIALOGUE, NAME: MARCH HARE, CONTENT: "It was the _best_ butter."\n\nTAG: DIALOGUE, NAME: HATTER, CONTENT: "Yes, but some crumbs must have got in as well; you shouldn't have put it in with the bread-knife."\n\nTAG: STATEMENT, CONTENT: The March Hare gloomily examines the watch, then dips it into his cup of tea.\n\nTAG: DIALOGUE, NAME: ALICE, CONTENT: "What a funny watch! It tells the day of the month, and 
doesn't tell what o'clock it is!"\n\nTAG: DIALOGUE, NAME: HATTER, CONTENT: "Why should it? Does _your_ watch tell you what year it is?"\n\nTAG: DIALOGUE, NAME: ALICE, CONTENT: "Of course not, but that's because it stays the same year for such a long time together."\n\nTAG: DIALOGUE, NAME: HATTER, CONTENT: "Which is just the case with _mine_."\n\nTAG: STATEMENT, CONTENT: Alice looks puzzled, trying to grasp the meaning behind the Hatter's words.\n\nTAG: DIALOGUE, NAME: ALICE, CONTENT: "I don't quite understand you."\n\nTAG: DIALOGUE, NAME: HATTER, CONTENT: "The Dormouse is asleep again."\n\nTAG: STATEMENT, CONTENT: The Hatter pours a little hot tea on the Dormouse's nose.\n\nTAG: DIALOGUE, NAME: DORMOUSE, CONTENT: "Of course, of course; just what I was going 
to remark myself."\n\nTAG: DIALOGUE, NAME: HATTER, CONTENT: "Have you guessed the riddle yet?"\n\nTAG: DIALOGUE, NAME: ALICE, CONTENT: "No, I give it up; what's the answer?"\n\nTAG: DIALOGUE, NAME: HATTER, CONTENT: "I haven't the slightest idea."\n\nTAG: DIALOGUE, NAME: MARCH HARE, CONTENT: "Nor I."\n"""

sample3 = """
\nLOCATION: INT. DUNGEON - NIGHT\nSTATEMENT: A dimly lit room filled with shadows. Two men, the DOCTOR and a GENTLEMAN, stand by a bed, discussing the sleepwalking Lady Macbeth.\n\nDIALOGUE: DOCTOR: I have watched with you for two nights, but I can perceive no truth in your report. When was it she last walked?\n\nDIALOGUE: GENTLEMAN: Since his Majesty went into the field, I have seen her rise from her bed, throw her nightgown upon her, unlock her closet, take forth paper, fold it, write upon it, read it, afterwards seal it, and again return to bed; yet all this while in a most fast sleep.\n\nDIALOGUE: DOCTOR: A great perturbation in nature, to receive at once the benefit of sleep, and do the effects of watching. In this slumbrous agitation, besides her walking and other actual performances, what have you heard her say?\n\nDIALOGUE: GENTLEMAN: That, sir, which I will 
not report after her.\n\nDIALOGUE: DOCTOR: You may to me, and 'tis most meet you should.\n\nDIALOGUE: GENTLEMAN: Neither to you, nor any one, having no witness to confirm my speech.\n\nSTATEMENT: The LADY enters, holding a taper, her eyes vacant and her demeanor 
eerily calm.\n\nDIALOGUE: GENTLEMAN: Lo, here she comes! This is her very guise, and upon my life, fast asleep. Observe her, stand close.\n\nDIALOGUE: DOCTOR: How came she by that light?\n\nDIALOGUE: GENTLEMAN: Why, it stood by her; she has light by her continually, 'tis her command.\n\nDIALOGUE: DOCTOR: You see her eyes are open.\n\nDIALOGUE: GENTLEMAN: Aye, but their senses are shut.\n\nSTATEMENT: The LADY begins to rub her hands, a repetitive and troubling action.\n\nDIALOGUE: DOCTOR: What is it she does now? Look how she rubs her hands.\n\nDIALOGUE: GENTLEMAN: It is an accustomed action with her to seem thus washing her hands: I have known her continue in this a quarter of an hour.\n\nDIALOGUE: LADY: Yet here's a spot.\n\nDIALOGUE: DOCTOR: Hark, she speaks; I will set down what comes from her, to satisfy my remembrance the more strongly.\n\nDIALOGUE: LADY: Out, damned spot! Out, I say. One: Two: Why then 'tis time to do't: Hell is murky. Fie, my lord, fie, a soldier, and afraid? What need we fear? Who knows it, when none can call our power to account? Yet who would have thought the old man to have had so much blood in him?\n\nDIALOGUE: DOCTOR: Do you mark that?\n\nDIALOGUE: LADY: The Thane of Fife had a wife: where is she now? What will these hands ne'er be clean? No more of that, my lord, 
no more of that: you mar all with this starting.\n\nDIALOGUE: DOCTOR: Go to, go to: you have known what you should not.\n\nDIALOGUE: GENTLEMAN: She has spoken what she should not, I am sure of that: Heaven knows what she has known.\n\nDIALOGUE: LADY: Here's the smell of the blood still: all the perfumes of Arabia will not sweeten this little hand. Oh, oh, oh!\n\nDIALOGUE: DOCTOR: What a sigh is there? The heart is sorely charged.\n\nDIALOGUE: GENTLEMAN: I would not have such a heart in my bosom for the dignity of the whole body.\n\nDIALOGUE: DOCTOR: Well, well, well.\n\nDIALOGUE: GENTLEMAN: Pray God it be, sir.\n\nDIALOGUE: DOCTOR: This disease is beyond my practice; yet I have known those who have walked in their sleep, who have died holily in their beds.\n\nDIALOGUE: LADY: Wash your hands, put on your nightgown, look not so pale: I tell you yet again Banquo's buried; he cannot come out on's grave.\n\nDIALOGUE: DOCTOR: Even so?\n\nDIALOGUE: LADY: To bed, to bed: there's knocking at the gate: Come, come, come, give me your hand: what's 
done cannot be undone. To bed, to bed, to bed.\n\nSTATEMENT: The LADY exits hurriedly, leaving the DOCTOR and GENTLEMAN in a state of concern.\n\nDIALOGUE: DOCTOR: Will she go now to bed?\n\nDIALOGUE: GENTLEMAN: Directly.\n\nDIALOGUE: DOCTOR: Foul whisperings are abroad: unnatural deeds do breed unnatural troubles: infected minds to their deaf pillows will discharge their secrets. More needs she the divine than the physician: God, God forgive us all. Look after her, remove from her the means of all annoyance, and still keep eyes upon her. So goodnight. My mind she has mated, and amazed my sight. I think, but dare not speak.\n\nDIALOGUE: GENTLEMAN: Good night, good doctor.\n\nLOCATION: INT. DUNGEON - CONTINUOUS\nSTATEMENT: The DOCTOR and GENTLEMAN exit, the air thick with tension.\n\nLOCATION: EXT. BIRNAM WOOD - DAY\nSTATEMENT: A group of soldiers enters, led by MENTETH, CATHNESS, ANGUS, and LENNOX, preparing to confront Macbeth.\n\nDIALOGUE: MENTETH: The English power is near, led on by Malcolm, his uncle Seyward, and the good Macduff. 
Revenge burns in them: for their dear causes would to the bleeding, and the grim alarm excite the mortified man.\n\nDIALOGUE: ANGUS: Near Birnam Wood shall we well meet them; that way are they coming.\n\nDIALOGUE: CATHNESS: Who knows if Donalbane be with his brother?\n\nDIALOGUE: LENNOX: For certain, sir, he is not: I have a file of all the gentry; there is Seyward's son, and many unruly youths, that even now protest their first of manhood.\n\nDIALOGUE: MENTETH: What does the tyrant?\n\nDIALOGUE: CATHNESS: Great Dunsinane he strongly fortifies: some say he's mad; others that lesser hate him, do call it valiant fury, but for certain he cannot buckle his distempered cause within the belt of rule.\n\nDIALOGUE: ANGUS: Now does he feel his secret murders sticking on his hands; now minutely revolts upbraid his faith-breach. Those he commands move only in command, nothing in love. Now does he feel his title hang loose about him, like a giant's robe upon a dwarfish thief.\n\nDIALOGUE: MENTETH: Who then shall blame his pestered senses to recoil 
and start when all that is within him does condemn itself for being there?\n\nDIALOGUE: CATHNESS: Well, march we on, to give obedience where 'tis truly owed: meet we the medicine of the sickly weal, and with him pour we in our country's purge, each drop of us.\n\nDIALOGUE: LENNOX: Or so much as it needs, to dew the sovereign flower and drown the weeds: make we our march towards Birnam.\n\nSTATEMENT: The soldiers march forward, their resolve evident as they prepare to confront Macbeth.\n\nLOCATION: INT. DUNGEON - DAY\nSTATEMENT: MACBETH stands with a DOCTOR and ATTENDANTS, exuding a sense of false confidence despite the impending threat.\n\nDIALOGUE: MACBETH: Bring me no more reports, let them fly all: till Birnam Wood remove to Dunsinane, I cannot taint with fear. What's the boy Malcolm? Was he not born of woman? The spirits that know all mortal consequences have pronounced me thus: fear not Macbeth, no man that's born of woman shall ere have power upon thee. Then fly false thanes, and mingle with the English epicures.\n\nDIALOGUE: MACBETH: The mind I sway by, and the heart I bear, shall never sag with doubt, nor shake with fear.\n\nSTATEMENT: A SERVANT enters, looking anxious.\n\nDIALOGUE: MACBETH: The devil damn thee black, thou cream-faced loon: where got'st thou that goose-look?\n\nDIALOGUE: SERVANT: There are ten thousand.\n\nDIALOGUE: MACBETH: Geese, villain?\n\nDIALOGUE: SERVANT: Soldiers, sir.\n\nDIALOGUE: MACBETH: Go prick thy face, and over-red thy fear, thou lily-livered boy. What soldiers, whay-face?\n\nDIALOGUE: SERVANT: The English force, so please you.\n\nDIALOGUE: MACBETH: Take thy face hence. Seyton, I am sick at heart when I behold. Seyton, I say, this push will cheer me ever, or dis-eat me now. I have lived long enough: my way of life is fallen into the sear, the yellow leaf, and that which 
should accompany old age, as honor, love, obedience, troops of friends, I must not look to have: but in their stead, curses, not loud but deep, mouth-honor, breath which the poor heart would fain deny, and dare not.\n\nDIALOGUE: MACBETH: Seyton?\n\nSTATEMENT: SEYTON enters, looking attentive.\n\nDIALOGUE: SEYTON: What's your gracious pleasure?\n\nDIALOGUE: MACBETH: What news more?\n\nDIALOGUE: SEYTON: All is confirmed, my lord, which was reported.\n\nSTATEMENT: The weight of impending doom hangs in the air as Macbeth grapples with his fate.\n
"""

sample_good = """
```plaintext\nTag: LOCATION, Content: INT. MACBETH'S CASTLE - DAY\nTag: STATEMENT, Content: Lady Macbeth enters with a servant. She looks anxious as she asks about Banquo's whereabouts.\n\nTag: DIALOGUE, Name: LADY, Content: Is Banquo gone from Court?\nTag: DIALOGUE, Name: SERVANT, Content: I, Madame, but returns again tonight.\nTag: DIALOGUE, Name: LADY, Content: Say to the King, I would attend his leisure, for a few words.\nTag: DIALOGUE, Name: SERVANT, Content: Madame, I will.\n\nTag: STATEMENT, Content: The servant exits. Lady Macbeth contemplates her desires and the consequences of their actions.\n\nTag: DIALOGUE, Name: LADY, Content: Nought's had, all's spent. Where our desire is got without content: 'Tis safer to be that which we destroy, than by destruction dwell in doubtful joy.\n\nTag: LOCATION, Content: INT. MACBETH'S CASTLE - DAY\nTag: STATEMENT, Content: Macbeth enters, looking troubled and deep in thought.\n\nTag: DIALOGUE, Name: LADY, Content: How now, my Lord, why do you keep alone? Of sorry fancies your companions making, using those thoughts, which should indeed have died with them they think on.\n\nTag: DIALOGUE, Name: MACBETH, Content: We have scorch'd the snake, not kill'd it: she'll close, and be herself, whilst our poor malice remains in danger of her former tooth.\n\nTag: STATEMENT, Content: Macbeth expresses his fear and unease about their actions and the consequences they bring.\n\nTag: DIALOGUE, Name: MACBETH, Content: Better be with the dead, whom we, to gain our peace, have sent to peace.\n\nTag: DIALOGUE, Name: LADY, Content: Come on: Gentle my Lord, sleek o'er your rugged looks, be bright and jovial among your guests tonight.\n\nTag: DIALOGUE, Name: MACBETH, Content: Let your remembrance apply to Banquo, present him eminence, both with eye and tongue.\n\nTag: DIALOGUE, Name: LADY, Content: You must leave this.\n\nTag: DIALOGUE, Name: MACBETH, Content: O, full of scorpions is my mind, dear wife: thou know'st that Banquo and his Fleance lives.\n\nTag: LOCATION, Content: INT. MACBETH'S CASTLE - NIGHT\nTag: STATEMENT, Content: Macbeth reveals his dark thoughts about Banquo and their plans. He speaks of the coming night as a time for dreadful deeds.\n\nTag: DIALOGUE, Name: MACBETH, Content: Come, sealing Night, scarf up the tender eye of pitiful Day.\n\nTag: DIALOGUE, Name: LADY, Content: What's to be done?\n\nTag: DIALOGUE, Name: MACBETH, Content: Be innocent of the knowledge, dearest chuck, till thou applaud the deed.\n\nTag: STATEMENT, Content: Macbeth and Lady Macbeth exit, plotting their next move.\n\nTag: LOCATION, Content: INT. OUTSIDE MACBETH'S CASTLE - NIGHT\nTag: STATEMENT, Content: Three murderers enter, discussing their orders from Macbeth.\n\nTag: DIALOGUE, Name: MURDERER 1, Content: But who did bid thee join with us?\nTag: DIALOGUE, Name: MURDERER 3, Content: Macbeth.\nTag: DIALOGUE, Name: MURDERER 2, Content: He needs not our mistrust, since he delivers our offices.\n\nTag: STATEMENT, Content: They prepare for Banquo's arrival, hiding in the shadows.\n\nTag: DIALOGUE, Name: MURDERER 1, Content: The West yet glimmers with some streaks of Day.\n\nTag: LOCATION, Content: INT. MACBETH'S BANQUET HALL - NIGHT\nTag: STATEMENT, Content: The banquet is prepared. Macbeth greets his guests with a warm demeanor despite his inner turmoil.\n\nTag: DIALOGUE, Name: MACBETH, Content: You know your own degrees, sit down: At first and last, the hearty welcome.\n\nTag: DIALOGUE, Name: LADY, Content: Pronounce it for me, Sir, to all our 
Friends, for my heart speaks, they are welcome.\n\nTag: STATEMENT, Content: A murderer enters, bloodied and anxious.\n\nTag: DIALOGUE, Name: MACBETH, Content: There's blood upon thy face.\nTag: DIALOGUE, Name: MURDERER, Content: 'Tis Banquo's then.\n\nTag: STATEMENT, Content: The mood shifts as Macbeth learns of Banquo's fate and grapples with his own fears.\n\nTag: DIALOGUE, Name: MACBETH, Content: Then comes my fit again: I had else been perfect.\n\nTag: DIALOGUE, Name: LADY, Content: My Royal Lord, you do not give the cheer, the feast is sold.\n\nTag: STATEMENT, Content: As the banquet continues, the ghost of Banquo appears, sitting in Macbeth's place, casting a shadow over the event.\n```
"""
import re

result = []
script = sample1
pattern = r"Tag|TAG: (\w+),(?: Name: (\w+),)? Content: (.+)"


    # 各行を処理
for line in script.strip().split("\n"):
    print(line)
    match = re.match(pattern, line)
    if match:
        tag, name, content = match.groups()
        entry = {"tag": tag, "content": content}
        if name:
            entry["name"] = name
        result.append(entry)
    
print(len(result))
"""
from movie_parser import *

parser = MovieScriptParser(sample2)
parser.parse()
parser.show_lines(10)
"""